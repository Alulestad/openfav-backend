<section class="dashboard">
  <header>
    <h1>Resumen general</h1>
    <p>Indicadores rápidos del ecosistema de proyectos.</p>
  </header>

  <div class="cards">
    <article>
      <h3>Proyectos registrados</h3>
      <strong>{{ metrics.projects }}</strong>
    </article>

    <article>
      <h3>Presupuesto total (USD)</h3>
      <strong>{{ metrics.totalBudget | number: '1.0-2' }}</strong>
    </article>

    <article>
      <h3>Actividades activas</h3>
      <strong>{{ metrics.activities }}</strong>
    </article>
    
  </div>

  <!-- Chart placed directly under the three main metrics (Proyectos / Presupuesto / Actividades) -->
  <div class="chart-container">
    <h3>Crecimiento (últimos 12 meses)</h3>
    <div style="height:320px">
      <canvas #growthCanvas></canvas>
      <!-- fallback simple SVG so user always sees something if Chart.js doesn't initialize -->
      <svg class="chart-fallback" viewBox="0 0 600 320" preserveAspectRatio="none" style="width:100%;height:100%;display:none;">
        <polyline points="0,260 60,200 120,220 180,150 240,180 300,140 360,160 420,120 480,130 540,90 600,80" fill="none" stroke="#3b82f6" stroke-width="3" stroke-linejoin="round" stroke-linecap="round" />
      </svg>
    </div>
  </div>

  <div class="cards">

    <article>
      <h3>Solicitudes por estado</h3>
      <ul>
        <li>Enviado: {{ metrics.solicitudes.enviado }}</li>
        <li>Revisando: {{ metrics.solicitudes.revisando }}</li>
        <li>Aprobado: {{ metrics.solicitudes.aprobado }}</li>
      </ul>
    </article>
  </div>

  <div class="chart-container">
    <h3>Crecimiento (últimos 12 meses)</h3>
    <div style="height:320px">
      <canvas #growthCanvas></canvas>
    </div>
  </div>

  <p class="loading" *ngIf="loading">Cargando métricas...</p>
</section>
